<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gretch 2025 NFL Rankings</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon.png">
    <link rel="shortcut icon" href="assets/images/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon.png">
    
    <!-- Design System -->
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: var(--ss-font-primary);
            margin: 0;
            background-color: var(--ss-light-gray);
            color: var(--ss-text-primary);
        }
        
        .logo-header {
            background-color: var(--ss-white);
            position: sticky;
            top: 0;
            z-index: 101;
            transition: transform 0.3s ease;
            transform: translateY(0);
        }
        
        .logo-header.scroll-hidden {
            transform: translateY(-100%);
        }
        
        .table-headers {
            background: var(--ss-white);
            position: sticky;
            top: 0;
            z-index: 100;
            margin-top: -1px; /* Overlap to prevent gap */
            border-bottom: 1px solid var(--ss-border); /* Full-width bottom border */
        }
        
        .table-headers-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
        }
        
        .table-header-item {
            background: var(--ss-white);
            color: var(--ss-text-primary);
            padding: 0.5rem 1rem;
            text-align: center;
            position: relative;
        }
        
        .table-header-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--ss-orange-primary), var(--ss-cyan), var(--ss-teal));
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .table-headers {
                background: var(--ss-white);
                position: sticky;
                top: 0;
                z-index: 100;
            }
            
            .table-headers-content {
                display: block; /* Single column on mobile */
            }
            
            .table-header-item {
                display: none; /* Hide all by default */
                border-right: none;
                width: 100%;
            }
            
            .table-header-item.mobile-active {
                display: block; /* Show only the active one */
            }
            
            .table-header-item.mobile-active::before {
                left: 0;
                right: 0;
                width: 100%;
            }
        }
        
        .table-header-title {
            font-size: 0.875rem;
            font-weight: 600;
            font-family: var(--ss-font-display);
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--ss-text-secondary);
        }
        
        .rankings-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem 1rem 1rem; /* Only bottom and side padding */
        }
        
        .positions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
            border-radius: 0 0 0.5rem 0.5rem; /* Only bottom corners rounded */
            overflow: hidden;
            box-shadow: var(--ss-shadow-sm);
            border: 1px solid var(--ss-border);
            border-top: none; /* Remove top border to connect with headers */
            background: var(--ss-white);
        }
        
        .position-column {
            background: var(--ss-white);
        }
        
        .players-list {
            padding: 0.375rem 0; /* Add top and bottom spacing for player data */
        }
        
        .player-item {
            display: flex;
            align-items: center;
            padding: 0.1875rem 0.625rem; /* Smaller padding for desktop */
            transition: background-color 0.2s ease;
        }
        
        .player-item:hover {
            background-color: var(--ss-orange-pale);
        }
        
        .player-rank {
            font-size: 0.625rem; /* Smaller for desktop */
            font-weight: 600;
            color: var(--ss-text-secondary);
            min-width: 1.25rem; /* Slightly narrower */
            text-align: right;
            margin-right: 0.375rem; /* Reduced margin */
            font-family: var(--ss-font-mono);
        }
        
        .player-name {
            font-size: 0.6875rem; /* Smaller for desktop */
            font-weight: 400;
            color: var(--ss-text-primary);
            line-height: 1.2;
        }
        
        /* Responsive Design */
        
        @media (max-width: 768px) {
            .positions-grid {
                grid-template-columns: 1fr;
            }
            
            .table-headers-content {
                grid-template-columns: 1fr;
                padding: 0 0.5rem;
            }
            
            .rankings-container {
                padding: 0.5rem;
            }
            
            .position-column {
                border-right: none;
                border-bottom: 1px solid var(--ss-border);
            }
            
            .position-column:last-child {
                border-bottom: none;
            }
            
            .table-header-item {
                border-right: none;
                border-bottom: 1px solid var(--ss-border);
            }
            
            .table-header-item:last-child {
                border-bottom: none;
            }
            
            /* Restore larger text and spacing for mobile */
            .player-item {
                padding: 0.25rem 0.75rem; /* Original mobile padding */
            }
            
            .player-rank {
                font-size: 0.6875rem; /* Original mobile font size */
                min-width: 1.5rem; /* Original mobile width */
                margin-right: 0.5rem; /* Original mobile margin */
            }
            
            .player-name {
                font-size: 0.75rem; /* Original mobile font size */
            }
        }
        
        @media (max-width: 480px) {
            .table-header-title {
                font-size: 0.75rem;
            }
            
            .table-header-item {
                padding: 0.375rem 0.75rem;
            }
            
            .player-name {
                font-size: 0.6875rem;
            }
            
            .player-rank {
                font-size: 0.625rem;
                min-width: 1.25rem;
                margin-right: 0.375rem;
            }
            
            .player-item {
                padding: 0.1875rem 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Logo Header -->
    <div class="logo-header" id="logo-header">
        <div id="header-placeholder"></div>
    </div>
    
    <!-- Sticky Table Headers -->
    <div class="table-headers" id="table-headers">
        <div class="table-headers-content">
            <div class="table-header-item">
                <h2 class="table-header-title">Quarterbacks</h2>
            </div>
            <div class="table-header-item">
                <h2 class="table-header-title">Running Backs</h2>
            </div>
            <div class="table-header-item">
                <h2 class="table-header-title">Wide Receivers</h2>
            </div>
            <div class="table-header-item">
                <h2 class="table-header-title">Tight Ends</h2>
            </div>
        </div>
    </div>
    
    <main class="rankings-container">
        <div class="positions-grid">
            <!-- Quarterbacks Column -->
            <div class="position-column">
                <div class="players-list" id="qb-list">
                    <!-- QB players will be loaded here -->
                </div>
            </div>
            
            <!-- Running Backs Column -->
            <div class="position-column">
                <div class="players-list" id="rb-list">
                    <!-- RB players will be loaded here -->
                </div>
            </div>
            
            <!-- Wide Receivers Column -->
            <div class="position-column">
                <div class="players-list" id="wr-list">
                    <!-- WR players will be loaded here -->
                </div>
            </div>
            
            <!-- Tight Ends Column -->
            <div class="position-column">
                <div class="players-list" id="te-list">
                    <!-- TE players will be loaded here -->
                </div>
            </div>
        </div>
    </main>
    
    <div id="footer-placeholder"></div>
    
    <script>
        // Player data
        const positions = {
            quarterbacks: [
                "Lamar Jackson", "Jayden Daniels", "Josh Allen", "Jalen Hurts", "Joe Burrow", "Patrick Mahomes", "Bo Nix", "Kyler Murray", "Baker Mayfield", "Justin Fields", "Brock Purdy", "Dak Prescott", "Caleb Williams", "Drake Maye", "J.J. McCarthy", "Trevor Lawrence", "Justin Herbert", "Jordan Love", "C.J. Stroud", "Jared Goff", "Bryce Young", "Tua Tagovailoa", "Michael Penix", "Anthony Richardson", "Cam Ward", "Geno Smith", "Matthew Stafford", "Aaron Rodgers", "Jaxson Dart", "Daniel Jones", "Sam Darnold", "Tyler Shough", "Russell Wilson", "Joe Flacco", "Jalen Milroe", "Dillon Gabriel", "Shedeur Sanders"
            ],
            runningbacks: [
                "Jahmyr Gibbs", "Bijan Robinson", "De'Von Achane", "Saquon Barkley", "Christian McCaffrey", "Ashton Jeanty", "Derrick Henry", "Bucky Irving", "Jonathan Taylor", "Kenneth Walker", "Chase Brown", "Omarion Hampton", "Josh Jacobs", "James Cook", "Breece Hall", "Kyren Williams", "TreVeyon Henderson", "RJ Harvey", "James Conner", "Chuba Hubbard", "Alvin Kamara", "David Montgomery", "D'Andre Swift", "Kaleb Johnson", "Cam Skattebo", "Aaron Jones", "Jordan Mason", "Jaylen Warren", "Tony Pollard", "JK Dobbins", "Tyjae Spears", "Isiah Pacheco", "Dylan Sampson", "Brian Robinson", "Travis Etienne", "Tyrone Tracy", "Zach Charbonnet", "Bhayshul Tuten", "Jaydon Blue", "Isaac Guerendo", "Jerome Ford", "Rhamondre Stevenson", "Tyler Allgeier", "Ray Davis", "Trey Benson", "Joe Mixon", "Brashard Smith", "Jarquez Hunter", "Tank Bigsby", "Najee Harris", "Javonte Williams", "Roschon Johnson", "Nick Chubb", "Rachaad White", "Austin Ekeler", "Quinshon Judkins", "Will Shipley", "Jaylen Wright", "DJ Giddens", "Tahj Brooks", "Jacory Croskey-Merritt", "Trevor Etienne", "Woody Marks", "Braelon Allen", "Kyle Monangai", "Keaton Mitchell", "Rico Dowdle", "Elijah Mitchell", "Devin Neal", "Ollie Gordon", "Sean Tucker", "Justice Hill", "Emanuel Wilson", "Miles Sanders", "Kendre Miller", "Ty Johnson", "MarShawn Lloyd", "Isaiah Davis", "Dameon Pierce", "Audric Estime", "Phil Mafah", "Kimani Vidal", "Kalel Mullings", "Antonio Gibson", "Samaje Perine", "Raheem Mostert", "Sincere McCormick", "AJ Dillon", "Blake Corum", "Jordan James", "Kareem Hunt", "Devin Singletary", "Alexander Mattison"
            ],
            widereceivers: [
                "Ja'Marr Chase", "CeeDee Lamb", "Malik Nabers", "Justin Jefferson", "Puka Nacua", "Nico Collins", "Brian Thomas", "Amon-Ra St. Brown", "Drake London", "Ladd McConkey", "Tyreek Hill", "A.J. Brown", "Davante Adams", "Jaxon Smith-Njigba", "Garrett Wilson", "Marvin Harrison", "Tee Higgins", "Xavier Worthy", "Tetairoa McMillan", "Rashee Rice", "George Pickens", "Jameson Williams", "Terry McLaurin", "Travis Hunter", "Mike Evans", "Zay Flowers", "Jaylen Waddle", "Jerry Jeudy", "Chris Olave", "DeVonta Smith", "Rome Odunze", "Jordan Addison", "D.J. Moore", "Jayden Reed", "Calvin Ridley", "DK Metcalf", "Courtland Sutton", "Jauan Jennings", "Khalil Shakir", "Stefon Diggs", "Emeka Egbuka", "Chris Godwin", "Josh Downs", "Brandon Aiyuk", "Ricky Pearsall", "Deebo Samuel", "Michael Pittman", "Jayden Higgins", "Matthew Golden", "Jakobi Meyers", "Luther Burden", "Tre Harris", "Cooper Kupp", "Darnell Mooney", "Kyle Williams", "Keon Coleman", "Marquise Brown", "Christian Kirk", "Wan'Dale Robinson", "Rashod Bateman", "Romeo Doubs", "Pat Bryant", "Rashid Shaheed", "Jalen Coker", "Jalen Royals", "Jaylin Noel", "Marvin Mims", "Troy Franklin", "Jalen McMillan", "Malik Washington", "Jaylin Lane", "Elic Ayomanor", "Dont'e Thornton", "Cedric Tillman", "KeAndre Lambert-Smith", "Jordan Whittington", "Diontae Johnson", "Xavier Legette", "Keenan Allen", "DeMario Douglas", "Dyami Brown", "Quentin Johnston", "Josh Reyolds", "Dontayvion Wicks", "Josh Palmer", "Tyler Lockett", "Alec Pierce", "Michael Wilson", "Darius Slayton", "Jack Bech", "Adam Thielen", "Calvin Austin", "Savion Williams", "Ray-Ray McCloud"
            ],
            tightends: [
                "Brock Bowers", "Trey McBride", "George Kittle", "Sam LaPorta", "T.J. Hockenson", "David Njoku", "Tucker Kraft", "Travis Kelce", "Mark Andrews", "Tyler Warren", "Colston Loveland", "Evan Engram", "Dallas Goedert", "Dalton Kincaid", "Jake Ferguson", "Kyle Pitts", "Brenton Strange", "Harold Fannin", "Zach Ertz", "Ja'Tavion Sanders", "Mike Gesicki", "Chig Okonkwo", "Hunter Henry", "Jonnu Smith", "Pat Freiermuth", "Cade Otton", "Isaiah Likely", "Dalton Schultz", "Tyler Higbee", "Terrance Ferguson", "Juwan Johnson", "Elijah Arroyo", "Darren Waller", "Tyler Conklin", "Mason Taylor", "Noah Fant", "Theo Johnson", "Cade Stover", "Will Dissly", "Orande Gadsden", "Cole Kmet", "Austin Hooper", "Gunnar Helm", "Michael Mayer", "AJ Barner", "Grant Calcaterra"
            ]
        };

        // Function to create player HTML
        function createPlayerHTML(playerName, rank) {
            return `
                <div class="player-item">
                    <div class="player-rank">${rank}</div>
                    <div class="player-name">${playerName}</div>
                </div>
            `;
        }

        // Function to populate position lists
        function populatePositions() {
            // Quarterbacks
            const qbList = document.getElementById('qb-list');
            qbList.innerHTML = positions.quarterbacks.map((player, index) => 
                createPlayerHTML(player, index + 1)
            ).join('');

            // Running Backs
            const rbList = document.getElementById('rb-list');
            rbList.innerHTML = positions.runningbacks.map((player, index) => 
                createPlayerHTML(player, index + 1)
            ).join('');

            // Wide Receivers
            const wrList = document.getElementById('wr-list');
            wrList.innerHTML = positions.widereceivers.map((player, index) => 
                createPlayerHTML(player, index + 1)
            ).join('');

            // Tight Ends
            const teList = document.getElementById('te-list');
            teList.innerHTML = positions.tightends.map((player, index) => 
                createPlayerHTML(player, index + 1)
            ).join('');
        }

        // Scroll behavior for two-stage sticky header
        let logoHeader = null;
        let tableHeaders = null;
        let logoHeaderHeight = 0;
        let ticking = false;
        
        function initScrollBehavior() {
            logoHeader = document.getElementById('logo-header');
            tableHeaders = document.getElementById('table-headers');
            
            // Get logo header height after it loads
            setTimeout(() => {
                logoHeaderHeight = logoHeader.offsetHeight;
            }, 100);
            
            window.addEventListener('scroll', requestScrollUpdate);
        }
        
        function requestScrollUpdate() {
            if (!ticking) {
                requestAnimationFrame(handleScroll);
                ticking = true;
            }
        }
        
        function handleScroll() {
            const scrollY = window.scrollY;
            
            // Threshold for transition - start when user scrolls past 50% of logo header height
            const threshold = logoHeaderHeight * 0.5;
            
            if (scrollY > threshold) {
                // Hide logo header (table headers are always visible)
                logoHeader.classList.add('scroll-hidden');
            } else {
                // Show logo header
                logoHeader.classList.remove('scroll-hidden');
            }
            
            ticking = false;
        }

        // Mobile header switching functionality
        let isMobile = false;
        let currentActiveHeader = 0; // 0=QB, 1=RB, 2=WR, 3=TE
        let headerItems = [];
        let positionColumns = [];
        let observer = null;

        function isMobileDevice() {
            return window.innerWidth <= 768;
        }

        function initMobileHeaders() {
            isMobile = isMobileDevice();
            
            if (isMobile) {
                headerItems = document.querySelectorAll('.table-header-item');
                positionColumns = document.querySelectorAll('.position-column');
                
                console.log(`Initializing mobile headers. Found ${headerItems.length} header items and ${positionColumns.length} position columns`);
                
                // Set QB as default active header on mobile
                setActiveHeader(0);
                
                // Set up Intersection Observer to monitor which section is visible
                setTimeout(() => {
                    setupIntersectionObserver();
                }, 500); // Small delay to ensure DOM is ready
            }
        }

        function setActiveHeader(index) {
            if (!isMobile) return;
            
            console.log(`Setting active header to index ${index}: ${['QB', 'RB', 'WR', 'TE'][index]}`);
            
            // Remove active class from all headers
            headerItems.forEach(item => item.classList.remove('mobile-active'));
            
            // Add active class to current header
            if (headerItems[index]) {
                headerItems[index].classList.add('mobile-active');
                currentActiveHeader = index;
                console.log(`Active header set successfully to: ${['QB', 'RB', 'WR', 'TE'][index]}`);
            } else {
                console.error(`Header item at index ${index} not found`);
            }
        }

        function setupIntersectionObserver() {
            if (!isMobile || !positionColumns.length) return;
            
            // Use a simpler scroll-based approach instead of complex intersection observer
            function checkActiveSection() {
                if (!isMobile) return;
                
                const headerHeight = document.getElementById('table-headers')?.offsetHeight || 0;
                const scrollThreshold = headerHeight + 50;
                
                // Check each section to see which one is at the top
                for (let i = 0; i < positionColumns.length; i++) {
                    const column = positionColumns[i];
                    const rect = column.getBoundingClientRect();
                    
                    // If this section's top is at or above the threshold and bottom is below threshold
                    if (rect.top <= scrollThreshold && rect.bottom > scrollThreshold) {
                        if (i !== currentActiveHeader) {
                            console.log(`Section ${i} (${['QB', 'RB', 'WR', 'TE'][i]}) is now at top`);
                            setActiveHeader(i);
                        }
                        break;
                    }
                }
            }
            
            // Create intersection observer for triggering checks
            observer = new IntersectionObserver((entries) => {
                checkActiveSection();
            }, {
                threshold: 0.1,
                rootMargin: '-50px 0px -50px 0px'
            });
            
            // Observe all position columns
            positionColumns.forEach((column, index) => {
                if (observer) {
                    observer.observe(column);
                    console.log(`Observing column ${index}: ${['QB', 'RB', 'WR', 'TE'][index]}`);
                }
            });
            
            // Also check on scroll for more responsive updates
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                if (!isMobile) return;
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(checkActiveSection, 50);
            });
            
            // Initial check
            setTimeout(checkActiveSection, 100);
        }

        function handleWindowResize() {
            const wasMobile = isMobile;
            isMobile = isMobileDevice();
            
            // If switching between mobile and desktop, reinitialize
            if (wasMobile !== isMobile) {
                if (observer) {
                    observer.disconnect();
                    observer = null;
                }
                
                if (isMobile) {
                    initMobileHeaders();
                } else {
                    // Reset all headers to visible on desktop
                    headerItems.forEach(item => {
                        item.classList.remove('mobile-active');
                    });
                }
            }
        }

        // Load components and populate data
        document.addEventListener('DOMContentLoaded', function() {
            // Populate player rankings
            populatePositions();

            // Load header and footer components
            fetch('components/header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-placeholder').innerHTML = data;
                    // Initialize scroll behavior after header loads
                    setTimeout(initScrollBehavior, 100);
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                });
            
            fetch('components/footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-placeholder').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading footer:', error);
                });
            
            // Initialize mobile headers after content loads
            setTimeout(() => {
                initMobileHeaders();
            }, 200);
        });

        // Listen for window resize to handle mobile/desktop switching
        window.addEventListener('resize', handleWindowResize);
    </script>
</body>
</html>